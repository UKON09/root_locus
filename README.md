# MATLAB根轨迹分析工具 (Root Locus Analysis Tool)

一个功能增强的MATLAB根轨迹绘制和分析工具，提供详细的系统特性分析和可视化功能。

## 🚀 功能特性

- **根轨迹绘制**: 基于MATLAB控制系统工具箱的增强版根轨迹图
- **自动临界增益计算**: 自动识别并计算系统虚轴交点的临界增益值
- **渐近线分析**: 自动计算并绘制根轨迹渐近线
- **角度分析**: 计算复数极点的出射角和复数零点的入射角
- **增强可视化**: 包含阻尼比网格、自然频率网格和详细标注
- **全面输出**: 提供完整的数值分析结果和图形显示

## 📋 系统要求

- **MATLAB版本**: R2016b或更高版本
- **必需工具箱**: 
  - Control System Toolbox
  - Symbolic Math Toolbox (用于临界增益计算)

## 📁 文件结构

```
project/
├── plotRootLocus.m    # 主要分析函数
├── sys.m              # 示例脚本
└── README.md          # 说明文档
```

## 🔧 使用方法

### 基本使用

1. **定义系统开环传递函数（在sys.m中）**
   
   方法一：使用零极点增益形式
   ```matlab
   sys_zeros = [];                    % 零点
   sys_poles = [0 -20 -2-4i -2+4i];  % 极点
   sys_gain = 1;                     % 增益
   G = zpk(sys_zeros, sys_poles, sys_gain);
   ```
   
   方法二：使用传递函数形式
   ```matlab
   s = tf('s');
   G = 1 / (s * (s + 20) * (s^2 + 4*s + 20));
   ```

2. **调用分析函数**
   ```matlab
   [r, k, k_crit, asymp, ang] = plotRootLocus(G);
   ```

### 运行示例

直接运行提供的示例：
```matlab
run('sys.m')
```

## 📊 函数参数

### 输入参数
- `sys`: 开环传递函数对象 (tf、zpk或ss对象)

### 输出参数
- `r`: 根轨迹上的极点位置矩阵
- `k`: 对应的增益向量
- `k_critical`: 临界增益值数组（虚轴交点）
- `asymptotes`: 渐近线信息结构体
  - `center`: 渐近线中心（质心）
  - `angles`: 渐近线角度数组
  - `count`: 渐近线数量
- `angles`: 出射角和入射角信息结构体
  - `departure`: 复数极点出射角数组
  - `arrival`: 复数零点入射角数组

## 📈 示例系统

项目中包含的示例系统：

```
               1
G(s) = ――――――――――――――――――――
       s(s + 20)(s² + 4s + 20)
```

该系统具有：
- **极点**: s = 0, -20, -2±4j
- **零点**: 无
- **类型**: 三阶系统，I型系统

## 🎯 分析结果

函数将输出以下分析结果：

### 1. 临界增益计算
- 自动识别虚轴交点
- 计算对应的临界增益值
- 在图上标记交点位置

### 2. 渐近线信息
- 渐近线中心坐标
- 渐近线角度
- 渐近线数量

### 3. 角度信息
- 计算各零极点与实轴正半轴夹角
- 复数极点的出射角
- 复数零点的入射角
- 在图上用箭头标示方向

### 4. 可视化效果
- 根轨迹曲线
- 极零点标记（× 表示极点，○ 表示零点）
- 临界点标记（● 表示虚轴交点）
- 渐近线（虚线）
- 阻尼比和自然频率网格

## 🔍 控制台输出示例

```
=== 零极点与实轴夹角 ===
极点与实轴夹角：
极点 1: 0.0000 (实数极点，夹角 = 0°)
极点 2: -20.0000 (实数极点，夹角 = 0°)
极点 3: -2.0000+4.0000j，夹角 = 116.6°
极点 4: -2.0000-4.0000j，夹角 = -116.6°

系统无零点

=== 临界增益计算 ===
虚轴交点: s = ±4.0825j, 临界增益: K = 1388.8889

=== 渐近线计算 ===
渐近线中心: σ = -6.0000
渐近线角度: 45.0° 135.0° 225.0° 315.0° 

=== 出射角/入射角计算 ===
复数极点出射角:
极点 -2.0000+4.0000j: 出射角 = -39.1°
极点 -2.0000-4.0000j: 出射角 = 39.1°

=== 分析总结 ===
系统阶数: 4 (极点数: 4, 零点数: 0)
临界增益数量: 1
渐近线数量: 4
复数极点数量: 2
复数零点数量: 0
```

## ⚠️ 注意事项

1. **符号计算**: 临界增益的自动计算依赖于Symbolic Math Toolbox
2. **系统稳定性**: 函数主要分析正增益情况下的根轨迹
3. **复数处理**: 确保输入的复数极点和零点以共轭对形式出现
4. **图形显示**: 建议在较大的显示器上查看详细标注

## 🛠️ 扩展功能

可以根据需要扩展以下功能：
- 添加补偿器设计
- 支持负反馈和正反馈分析
- 增加时域响应分析
- 添加频域特性分析

## 📚 相关理论

本工具基于经典控制理论中的根轨迹法，主要涉及：
- Evans根轨迹规则
- 角度准则和幅值准则
- 渐近线理论
- 出射角和入射角计算

## 🤝 贡献

欢迎提交Issue和Pull Request来改进这个工具！

## 📄 许可证

本项目采用MIT许可证。

---

**作者**: UKON09  
**更新日期**: 2025年6月  
**版本**: 1.0
